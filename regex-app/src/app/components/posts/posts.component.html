<div class="container mt-4">
  <h1 class="text-center">Posts</h1>
  <div *ngIf="posts.length === 0" class="alert alert-warning">
    No hay posts disponibles.
  </div>
  <div *ngFor="let post of posts" class="card my-3 shadow">
    <div class="card-body">
      <h3 class="card-title">{{ post.title }}</h3>
      <p class="card-text">{{ post.description }}</p>
      <p class="card-text"><strong>Valoración:</strong> {{ post.rate }}</p>
      <p class="card-text">
        <strong>Fecha de creación:</strong>
        {{ post.createdDate | date : "medium" }}
      </p>
      <hr />
      <h5>Comentarios</h5>
      <div *ngIf="post.comments.length === 0" class="text-muted">
        No hay comentarios.
      </div>
      <ul class="list-group">
        <li
          *ngFor="let comment of post.comments"
          class="list-group-item d-flex justify-content-between align-items-center"
        >
          <span>{{ comment.content }}</span>
          <span class="badge bg-secondary text-light">{{
            comment.createdDate | date : "short"
          }}</span>
        </li>
      </ul>
      <hr />
      <h6>Agregar comentario</h6>
      <form (submit)="addComment(post.id)">
        <div class="input-group">
          <input
            type="text"
            class="form-control"
            placeholder="Escribe tu comentario..."
            [(ngModel)]="newCommentContent"
            name="comment"
            required
            (ngModelChange)="validateComment()"
          />
          <button class="btn btn-primary" type="submit">Enviar</button>
        </div>
        <div *ngIf="errorMessage" class="text-danger mt-2">
          {{ errorMessage }}
        </div>
      </form>
    </div>
  </div>
</div>
